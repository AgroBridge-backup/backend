import{_ as a,c as i,o as e,ae as n}from"./chunks/framework.BQlYxExx.js";const k=JSON.parse('{"title":"Gu√≠a de Inicio: Onboarding de Desarrolladores API AgroBridge","description":"","frontmatter":{},"headers":[],"relativePath":"es/ONBOARDING.md","filePath":"es/ONBOARDING.md","lastUpdated":1764098389000}'),o={name:"es/ONBOARDING.md"};function l(t,s,p,r,d,h){return e(),i("div",null,[...s[0]||(s[0]=[n(`<h1 id="guia-de-inicio-onboarding-de-desarrolladores-api-agrobridge" tabindex="-1">Gu√≠a de Inicio: Onboarding de Desarrolladores API AgroBridge <a class="header-anchor" href="#guia-de-inicio-onboarding-de-desarrolladores-api-agrobridge" aria-label="Permalink to &quot;Gu√≠a de Inicio: Onboarding de Desarrolladores API AgroBridge&quot;">‚Äã</a></h1><blockquote><p>üá∫üá∏ <strong><a href="./../en/ONBOARDING.html">Read this in English</a></strong></p></blockquote><blockquote><p><strong>Audiencia:</strong> Ingenieros de Software, DevOps <strong>Objetivo:</strong> Esta gu√≠a proporciona un proceso completo paso a paso para configurar el entorno de desarrollo backend desde una m√°quina limpia.</p></blockquote><h2 id="_1-prerrequisitos" tabindex="-1">1. Prerrequisitos <a class="header-anchor" href="#_1-prerrequisitos" aria-label="Permalink to &quot;1. Prerrequisitos&quot;">‚Äã</a></h2><p>Aseg√∫rese de que el siguiente software est√© instalado en su m√°quina:</p><ul><li><strong>Git:</strong> Para clonar el repositorio.</li><li><strong>Node.js:</strong> Versi√≥n <code>20.x</code> o superior.</li><li><strong>pnpm:</strong> Versi√≥n <code>8.x</code> o superior. Instalar v√≠a <code>npm install -g pnpm</code>.</li><li><strong>Docker &amp; Docker Compose:</strong> Para ejecutar servicios dependientes (Base de Datos, Cach√©).</li></ul><h2 id="_2-configuracion-paso-a-paso" tabindex="-1">2. Configuraci√≥n Paso a Paso <a class="header-anchor" href="#_2-configuracion-paso-a-paso" aria-label="Permalink to &quot;2. Configuraci√≥n Paso a Paso&quot;">‚Äã</a></h2><h3 id="paso-2-1-clonar-el-repositorio" tabindex="-1">Paso 2.1: Clonar el Repositorio <a class="header-anchor" href="#paso-2-1-clonar-el-repositorio" aria-label="Permalink to &quot;Paso 2.1: Clonar el Repositorio&quot;">‚Äã</a></h3><p>Clone el repositorio principal del proyecto en su m√°quina local.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">url-del-repositori</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">o</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">directorio-del-repositori</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">o</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><h3 id="paso-2-2-configurar-variables-de-entorno" tabindex="-1">Paso 2.2: Configurar Variables de Entorno <a class="header-anchor" href="#paso-2-2-configurar-variables-de-entorno" aria-label="Permalink to &quot;Paso 2.2: Configurar Variables de Entorno&quot;">‚Äã</a></h3><p>El servicio backend (<code>apps/api</code>) requiere variables de entorno espec√≠ficas para ejecutarse.</p><ol><li><p><strong>Navegue al directorio de la API:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apps/api</span></span></code></pre></div></li><li><p><strong>Cree el archivo <code>.env</code>:</strong> Copie el archivo de ejemplo. Este archivo es ignorado por git y contendr√° sus secretos locales.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env.example</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env</span></span></code></pre></div></li><li><p><strong>Edite el archivo <code>.env</code>:</strong> Abra <code>apps/api/.env</code> y complete las siguientes variables.</p><div class="language-dotenv vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">dotenv</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Puerto del servidor backend</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">PORT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">4000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># URL de conexi√≥n a Base de Datos para el servicio Docker</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">DATABASE_URL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;postgresql://agro_user:supersecretpassword@localhost:5432/agrobridge?schema=public&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># URL de conexi√≥n a Redis para el servicio Docker</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">REDIS_URL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;redis://localhost:6379&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Rutas a las claves de firma JWT. Gen√©relas localmente.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Ver secci√≥n de Soluci√≥n de Problemas para generar claves.</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">JWT_PRIVATE_KEY_PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./jwtRS256.key&quot;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">JWT_PUBLIC_KEY_PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./jwtRS256.key.pub&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Configuraci√≥n de tiempo de vida del token</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">JWT_ACCESS_TOKEN_TTL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;15m&quot;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">JWT_REFRESH_TOKEN_TTL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;7d&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># URL del frontend para configuraci√≥n CORS</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">FRONTEND_URL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://localhost:3000&quot;</span></span></code></pre></div></li></ol><h3 id="paso-2-3-iniciar-servicios-dependientes" tabindex="-1">Paso 2.3: Iniciar Servicios Dependientes <a class="header-anchor" href="#paso-2-3-iniciar-servicios-dependientes" aria-label="Permalink to &quot;Paso 2.3: Iniciar Servicios Dependientes&quot;">‚Äã</a></h3><p>El backend requiere una base de datos PostgreSQL y una instancia de Redis. El archivo <code>docker-compose.yml</code> en la ra√≠z del proyecto gestiona estos servicios.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Desde el directorio ra√≠z del proyecto</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker-compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> redis</span></span></code></pre></div><p>Este comando inicia los contenedores de base de datos y Redis en segundo plano.</p><h3 id="paso-2-4-instalar-dependencias" tabindex="-1">Paso 2.4: Instalar Dependencias <a class="header-anchor" href="#paso-2-4-instalar-dependencias" aria-label="Permalink to &quot;Paso 2.4: Instalar Dependencias&quot;">‚Äã</a></h3><p>Use <code>pnpm</code> desde la ra√≠z del monorepo para instalar todas las dependencias de cada proyecto, incluyendo el backend <code>apps/api</code>.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Desde el directorio ra√≠z del proyecto</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><h3 id="paso-2-5-preparar-la-base-de-datos" tabindex="-1">Paso 2.5: Preparar la Base de Datos <a class="header-anchor" href="#paso-2-5-preparar-la-base-de-datos" aria-label="Permalink to &quot;Paso 2.5: Preparar la Base de Datos&quot;">‚Äã</a></h3><ol><li><p><strong>Ejecutar Migraciones:</strong> Aplicar el esquema de la base de datos.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Desde el directorio apps/api</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span></code></pre></div><p>Este comando configurar√° todas las tablas y relaciones en la base de datos <code>agrobridge</code>.</p></li><li><p><strong>Sembrar (Seed) la Base de Datos:</strong> Poblar la base de datos con datos iniciales (ej. usuario admin, productores de prueba).</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Desde el directorio apps/api</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma:seed</span></span></code></pre></div></li></ol><h3 id="paso-2-6-ejecutar-la-aplicacion" tabindex="-1">Paso 2.6: Ejecutar la Aplicaci√≥n <a class="header-anchor" href="#paso-2-6-ejecutar-la-aplicacion" aria-label="Permalink to &quot;Paso 2.6: Ejecutar la Aplicaci√≥n&quot;">‚Äã</a></h3><p>Ahora est√° listo para iniciar el servidor backend.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Desde el directorio apps/api</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span></code></pre></div><p>La API iniciar√° en el puerto definido en su archivo <code>.env</code> (ej. <code>http://localhost:4000</code>). El servidor se reiniciar√° autom√°ticamente cuando realice cambios en el c√≥digo fuente.</p><p><strong>¬°Ha configurado exitosamente el backend de la API de AgroBridge!</strong></p><h2 id="_3-solucion-de-problemas-comunes" tabindex="-1">3. Soluci√≥n de Problemas Comunes <a class="header-anchor" href="#_3-solucion-de-problemas-comunes" aria-label="Permalink to &quot;3. Soluci√≥n de Problemas Comunes&quot;">‚Äã</a></h2><ul><li><p><strong>Error: <code>listen EADDRINUSE: address already in use :::4000</code></strong></p><ul><li><strong>Causa:</strong> Otro proceso est√° usando el puerto 4000.</li><li><strong>Soluci√≥n:</strong> Detenga el otro proceso o cambie el <code>PORT</code> en su archivo <code>apps/api/.env</code> a uno diferente (ej. <code>4001</code>).</li></ul></li><li><p><strong>Error: Can&#39;t connect to database</strong></p><ul><li><strong>Causa:</strong> El contenedor Docker de base de datos no se est√° ejecutando o la <code>DATABASE_URL</code> es incorrecta.</li><li><strong>Soluci√≥n:</strong><ol><li>Verifique que los contenedores corran con <code>docker ps</code>.</li><li>Aseg√∫rese de que su <code>DATABASE_URL</code> en <code>.env</code> coincida con las credenciales en <code>docker-compose.yml</code>.</li><li>Verifique que est√° usando <code>localhost</code> o <code>127.0.0.1</code> y no <code>db</code> en su cadena de conexi√≥n para desarrollo local.</li></ol></li></ul></li><li><p><strong>Error: <code>ENOENT: no such file or directory, open &#39;./jwtRS256.key&#39;</code></strong></p><ul><li><strong>Causa:</strong> Las claves de firma JWT no se han generado. La aplicaci√≥n requiere un par de claves RSA para firmar tokens.</li><li><strong>Soluci√≥n:</strong> Genere un nuevo par de claves en el directorio <code>apps/api</code>.<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># En el directorio apps/api</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-keygen</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rsa</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2048</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PEM</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jwtRS256.key</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rsa</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jwtRS256.key</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -pubout</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -outform</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PEM</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jwtRS256.key.pub</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># No agregue una contrase√±a cuando se le solicite.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Aseg√∫rese de que los archivos .key se agreguen a .gitignore y nunca se commiteen.</span></span></code></pre></div></li></ul></li></ul>`,29)])])}const g=a(o,[["render",l]]);export{k as __pageData,g as default};
