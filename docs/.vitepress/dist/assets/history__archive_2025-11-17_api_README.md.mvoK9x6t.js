import{_ as s,c as a,o as e,ae as t}from"./chunks/framework.BQlYxExx.js";const g=JSON.parse('{"title":"AgroBridge API v2.0","description":"","frontmatter":{},"headers":[],"relativePath":"history/_archive_2025-11-17/api/README.md","filePath":"history/_archive_2025-11-17/api/README.md","lastUpdated":1764097797000}'),n={name:"history/_archive_2025-11-17/api/README.md"};function l(p,i,o,h,r,d){return e(),a("div",null,[...i[0]||(i[0]=[t(`<h1 id="agrobridge-api-v2-0" tabindex="-1">AgroBridge API v2.0 <a class="header-anchor" href="#agrobridge-api-v2-0" aria-label="Permalink to &quot;AgroBridge API v2.0&quot;">​</a></h1><p>This is the enterprise-grade backend API for AgroBridge 2.0, built with Node.js, TypeScript, and a Clean Architecture approach.</p><h2 id="features" tabindex="-1">Features <a class="header-anchor" href="#features" aria-label="Permalink to &quot;Features&quot;">​</a></h2><ul><li><strong>RESTful API</strong>: A complete API for managing producers, batches, traceability events, and certifications.</li><li><strong>Authentication</strong>: JWT-based authentication (RS256) with refresh token rotation.</li><li><strong>Blockchain Integration</strong>: Interacts with Polygon smart contracts for traceability and certification.</li><li><strong>Database</strong>: Uses PostgreSQL with Prisma ORM.</li><li><strong>Caching</strong>: Leverages Redis for caching expensive queries and for rate limiting.</li><li><strong>IPFS Integration</strong>: Uses Pinata for decentralized file storage (certificates, photos).</li><li><strong>Robust Error Handling</strong>: Centralized error handling with domain-specific error mapping.</li><li><strong>Validation</strong>: Request validation using Zod schemas.</li></ul><h2 id="getting-started" tabindex="-1">Getting Started <a class="header-anchor" href="#getting-started" aria-label="Permalink to &quot;Getting Started&quot;">​</a></h2><h3 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">​</a></h3><ul><li>Node.js &gt;= 20.0.0</li><li>pnpm &gt;= 8.0.0</li><li>Docker and Docker Compose</li><li>PostgreSQL instance</li><li>Redis instance</li></ul><h3 id="installation" tabindex="-1">Installation <a class="header-anchor" href="#installation" aria-label="Permalink to &quot;Installation&quot;">​</a></h3><ol><li><p><strong>Clone the repository</strong></p></li><li><p><strong>Navigate to the API directory:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apps/api</span></span></code></pre></div></li><li><p><strong>Install dependencies:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div></li><li><p><strong>Set up environment variables:</strong> Copy the <code>.env.example</code> file to a new <code>.env</code> file:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env.example</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env</span></span></code></pre></div><p>Fill in the required environment variables in the <code>.env</code> file.</p></li><li><p><strong>Generate RSA keys for JWT:</strong> Use OpenSSL to generate a private/public key pair for signing JWTs.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> genpkey</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -algorithm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> RSA</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> private_key.pem</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -pkeyopt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rsa_keygen_bits:2048</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rsa</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -pubout</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> private_key.pem</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> public_key.pem</span></span></code></pre></div><p>Copy the contents of <code>private_key.pem</code> and <code>public_key.pem</code> into the <code>JWT_PRIVATE_KEY</code> and <code>JWT_PUBLIC_KEY</code> variables in your <code>.env</code> file. Remember to format them as single-line strings with <code>\\n</code> for newlines.</p></li><li><p><strong>Set up the database:</strong> Run the Prisma migrations to create the database schema.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma:migrate</span></span></code></pre></div></li><li><p><strong>(Optional) Seed the database:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma:seed</span></span></code></pre></div></li></ol><h3 id="running-the-application" tabindex="-1">Running the Application <a class="header-anchor" href="#running-the-application" aria-label="Permalink to &quot;Running the Application&quot;">​</a></h3><ul><li><p><strong>Development mode (with hot-reloading):</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span></code></pre></div></li><li><p><strong>Production mode:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span></span></code></pre></div></li></ul><h3 id="running-tests" tabindex="-1">Running Tests <a class="header-anchor" href="#running-tests" aria-label="Permalink to &quot;Running Tests&quot;">​</a></h3><ul><li><p><strong>Run all tests:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span></span></code></pre></div></li><li><p><strong>Run E2E tests:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test:e2e</span></span></code></pre></div></li><li><p><strong>Get test coverage:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test:coverage</span></span></code></pre></div></li></ul><h2 id="api-endpoints" tabindex="-1">API Endpoints <a class="header-anchor" href="#api-endpoints" aria-label="Permalink to &quot;API Endpoints&quot;">​</a></h2><p>See the individual route files in <code>src/presentation/routes/</code> for a detailed list of endpoints.</p><ul><li><code>/api/v1/auth</code></li><li><code>/api/v1/batches</code></li><li><code>/api/v1/events</code></li><li><code>/api/v1/producers</code></li></ul>`,16)])])}const k=s(n,[["render",l]]);export{g as __pageData,k as default};
