import{_ as e,c as t,o as i,ae as s}from"./chunks/framework.BQlYxExx.js";const k=JSON.parse('{"title":"ðŸ”— AgroBridge Blockchain Smart Contracts","description":"","frontmatter":{},"headers":[],"relativePath":"history/_archive_2025-11-17/blockchain/README.md","filePath":"history/_archive_2025-11-17/blockchain/README.md","lastUpdated":1764097797000}'),n={name:"history/_archive_2025-11-17/blockchain/README.md"};function o(r,a,l,h,c,p){return i(),t("div",null,[...a[0]||(a[0]=[s('<h1 id="ðŸ”—-agrobridge-blockchain-smart-contracts" tabindex="-1">ðŸ”— AgroBridge Blockchain Smart Contracts <a class="header-anchor" href="#ðŸ”—-agrobridge-blockchain-smart-contracts" aria-label="Permalink to &quot;ðŸ”— AgroBridge Blockchain Smart Contracts&quot;">â€‹</a></h1><p>This directory contains the Solidity smart contracts that form the immutable backbone of the AgroBridge 2.0 traceability platform, designed for deployment on the Polygon PoS network.</p><h2 id="ðŸ“‹-core-contracts" tabindex="-1">ðŸ“‹ Core Contracts <a class="header-anchor" href="#ðŸ“‹-core-contracts" aria-label="Permalink to &quot;ðŸ“‹ Core Contracts&quot;">â€‹</a></h2><p>The architecture is composed of three main UUPS-upgradeable contracts that work together to provide a robust and secure system.</p><h3 id="_1-producercertification-sol" tabindex="-1">1. <code>ProducerCertification.sol</code> <a class="header-anchor" href="#_1-producercertification-sol" aria-label="Permalink to &quot;1. `ProducerCertification.sol`&quot;">â€‹</a></h3><p>This contract acts as the central authority for managing a whitelist of verified producers.</p><p><strong>Features:</strong></p><ul><li><strong>Role-Based Access:</strong> Uses OpenZeppelin&#39;s <code>AccessControl</code> to manage a <code>CERTIFIER_ROLE</code>, which is the only role authorized to add or revoke producers.</li><li><strong>Producer Whitelist:</strong> Maintains a mapping of producer wallet addresses to their certification status and business details.</li><li><strong>Upgradeability:</strong> Implements the UUPS proxy pattern, allowing for future upgrades by the admin.</li></ul><h3 id="_2-traceabilityregistry-sol" tabindex="-1">2. <code>TraceabilityRegistry.sol</code> <a class="header-anchor" href="#_2-traceabilityregistry-sol" aria-label="Permalink to &quot;2. `TraceabilityRegistry.sol`&quot;">â€‹</a></h3><p>This is the core ledger for recording Critical Tracking Events (CTEs) for each batch of produce, designed to be compliant with food safety standards like FSMA Rule 204.</p><p><strong>Features:</strong></p><ul><li><strong>Immutable Event Chain:</strong> Each event is cryptographically linked to the previous one for the same batch, creating a verifiable and tamper-evident history.</li><li><strong>Certified Producers Only:</strong> Integrates with <code>ProducerCertification</code> to ensure that only whitelisted producers can register events.</li><li><strong>Rich Data Storage:</strong> Captures essential data points including event type, GPS coordinates, and an IPFS hash for associated documents.</li><li><strong>Event Verification:</strong> A <code>CERTIFIER_ROLE</code> can verify the authenticity of specific events on-chain.</li></ul><h3 id="_3-batchtoken-sol" tabindex="-1">3. <code>BatchToken.sol</code> <a class="header-anchor" href="#_3-batchtoken-sol" aria-label="Permalink to &quot;3. `BatchToken.sol`&quot;">â€‹</a></h3><p>This contract represents each unique production batch as an ERC-721 Non-Fungible Token (NFT).</p><p><strong>Features:</strong></p><ul><li><strong>Digital Twin:</strong> Each NFT serves as a &quot;digital twin&quot; for a physical batch, allowing ownership and custody to be tracked on-chain.</li><li><strong>Certified Minting:</strong> Only certified producers (verified via <code>ProducerCertification</code>) can mint new batch NFTs.</li><li><strong>Rich Metadata:</strong> The token URI points to an IPFS location containing detailed metadata, photos, and quality reports for the batch.</li><li><strong>Royalties:</strong> Implements EIP-2981 to enable royalty payments on secondary sales, providing a mechanism to fund producer cooperatives.</li></ul><h2 id="ðŸš€-development-setup" tabindex="-1">ðŸš€ Development Setup <a class="header-anchor" href="#ðŸš€-development-setup" aria-label="Permalink to &quot;ðŸš€ Development Setup&quot;">â€‹</a></h2><h3 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">â€‹</a></h3><ul><li>Node.js (v18+)</li><li>pnpm (v8+)</li><li>Hardhat</li></ul><h3 id="installation" tabindex="-1">Installation <a class="header-anchor" href="#installation" aria-label="Permalink to &quot;Installation&quot;">â€‹</a></h3><ol><li>Navigate to the root of the monorepo.</li><li>Install all dependencies:<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div></li></ol><h3 id="compiling-contracts" tabindex="-1">Compiling Contracts <a class="header-anchor" href="#compiling-contracts" aria-label="Permalink to &quot;Compiling Contracts&quot;">â€‹</a></h3><p>To compile the smart contracts, run:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --filter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> blockchain</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compile</span></span></code></pre></div><h3 id="running-tests" tabindex="-1">Running Tests <a class="header-anchor" href="#running-tests" aria-label="Permalink to &quot;Running Tests&quot;">â€‹</a></h3><p>To run the comprehensive test suite:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --filter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> blockchain</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span></span></code></pre></div><h3 id="local-deployment" tabindex="-1">Local Deployment <a class="header-anchor" href="#local-deployment" aria-label="Permalink to &quot;Local Deployment&quot;">â€‹</a></h3><p>To deploy the contracts to a local Hardhat network:</p><ol><li>Start a local node:<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hardhat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span></span></code></pre></div></li><li>In a new terminal, run the deployment script:<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hardhat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apps/blockchain/scripts/deploy.ts</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localhost</span></span></code></pre></div></li></ol><h3 id="testnet-mainnet-deployment" tabindex="-1">Testnet/Mainnet Deployment <a class="header-anchor" href="#testnet-mainnet-deployment" aria-label="Permalink to &quot;Testnet/Mainnet Deployment&quot;">â€‹</a></h3><ol><li>Copy <code>apps/blockchain/.env.example</code> to <code>apps/blockchain/.env</code>.</li><li>Fill in the required values (RPC URL, private key, PolygonScan API key).</li><li>Run the deployment script for the desired network (e.g., <code>mumbai</code>):<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hardhat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apps/blockchain/scripts/deploy.ts</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mumbai</span></span></code></pre></div></li></ol><h3 id="seeding-producers" tabindex="-1">Seeding Producers <a class="header-anchor" href="#seeding-producers" aria-label="Permalink to &quot;Seeding Producers&quot;">â€‹</a></h3><p>After deployment, you can add test producers to the <code>ProducerCertification</code> contract:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hardhat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apps/blockchain/scripts/seed-producers.ts</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --network</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">your-networ</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div>',35)])])}const g=e(n,[["render",o]]);export{k as __pageData,g as default};
